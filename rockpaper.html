<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<body>
	<script type="text/javascript">
		function computerPlay() {
			let choice = ''
			let compChoice = Math.floor(Math.random() * 3)
			switch (compChoice) {
				case 0:
				  choice = 'rock';
					break;	
				case 1:
				  choice = 'paper';
					break;
				case 2:
				  choice = 'scissors';

			}
			return choice
		}

		function getPlayerSelection() {
			const validChoices = ['rock', 'paper', 'scissors']
			let selection = prompt("Please make your choice: rock, paper or scissors");
			selection = selection.toLowerCase();
			if (validChoices.includes(selection)) {
				return selection;
			}
			else {
				alert("That was not a valid selection")
				return getPlayerSelection();
			}	
		}	

		function playRound(playerSelection, computerSelection) {
			let result = 'tie';
			if (playerSelection == computerSelection) {
				return result;
			}
			else {
				let playerWin = true;
				switch(playerSelection) {
					case 'rock':
						computerSelection == 'scissors' ? playerWin : playerWin = false
							break;
					case 'paper':
						computerSelection == 'rock' ? playerWin : playerWin = false
						break;
					case 'scissors':
						computerSelection == 'paper' ? playerWin : playerWin = false
						break;
					default:
						console.log("there was an error");

				}	
				if (playerWin)
					return result = 'win'
				else
					return result = 'lose'
			}
		}


 

 		function game() {
 			let playerScore = 0;
 			let computerScore = 0;
 			for (i = 0; i < 5; i++) {
 				const playerSelection = getPlayerSelection() 
 				console.log("player choice: " + playerSelection)
  			const computerSelection = computerPlay()
  			console.log("Computer selected: " + computerSelection)
  			result = playRound(playerSelection, computerSelection)
  			if (result == 'win') {
  				console.log("You win " + playerSelection + " beats " + computerSelection);
  				playerScore += 1;
  			}
  			else if (result == 'lose') {
  				console.log("You lose " + computerSelection + " beats " + playerSelection );	
  				computerScore += 1
  			}
  			else {
  				console.log("It's a tie!!!!")
  			}
 			}
 			if (playerScore > computerScore) {
 				console.log("You win " + playerScore + " to " + computerScore);
 			}
 			else if (computerScore > playerScore) {
 				console.log("The computer has beaten you " + computerScore + " to " + playerScore);
 			}
 			else
 				console.log("The game was tied " + playerScore + " to " + computerScore);
 		}

  game()
 
	</script>

</body>
</html>